(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{14:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=r.a.forwardRef(function(e,n){var t=e.type,a=e.placeholder,i=e.value,l=e.onChange,c=e.name,o=e.className;return r.a.createElement("input",{type:t,placeholder:a,value:i,onChange:function(e){return l(e.target.value)},name:c,className:o,ref:n})}),l=function(e){var n=e.name,t=e.value,a=e.onChange,i=e.options,l=e.className;return r.a.createElement("select",{name:n,value:t,onChange:function(e){return a(e.target.value)},className:l},i.map(function(e,n){return r.a.createElement("option",{value:e,key:n},e)}))},c=function(e){var n=e.value,t=e.onClick,a=e.name,i=e.className;return r.a.createElement("button",{onClick:t,name:a,className:i},n)},o=function(e,n){console.log(e,n)},s=Object(a.forwardRef)(function(e,n){var t=e.inputPlaceHolder,a=e.inputValue,c=e.inputOnchange,o=e.selectValue,s=e.selectOnchange;return r.a.createElement("div",{className:"inputSelect",ref:n},r.a.createElement(i,{type:"number",placeholder:t,name:"minsecTime",value:a,onChange:c}),r.a.createElement(l,{name:"minsec",options:["s","m"],value:o,onChange:s}))});function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(t.push(l.value),!n||t.length!==n);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=function(){var e=u(Object(a.useState)(""),2),n=e[0],t=e[1],m=u(Object(a.useState)("Today"),2),f=m[0],d=m[1],v=u(Object(a.useState)(""),2),g=v[0],p=v[1],h=u(Object(a.useState)(""),2),y=h[0],w=h[1],N=u(Object(a.useState)("s"),2),b=N[0],E=N[1],O=u(Object(a.useState)(!1),2),T=O[0],k=O[1],S=r.a.createRef(),R=r.a.createRef(),D={taskFieldRef:S,timeFieldRef:R};return r.a.createElement("div",{className:"scheduleAlarmContainer"},r.a.createElement(i,{type:"text",placeholder:"Incident Number",name:"task",value:n,onChange:t,ref:S,className:"taskInputField"}),r.a.createElement(l,{name:"day",options:["Today","Tomorrow","Recurring"],value:f,onChange:d,className:"daySelect"}),"Recurring"===f?r.a.createElement(s,{inputValue:y,inputOnchange:w,inputPlaceHolder:"Time",selectValue:b,selectOnchange:E,ref:R}):r.a.createElement(i,{type:"time",name:"time",value:g,onChange:p,className:"inputTime",ref:R}),T?r.a.createElement("div",{className:"warningMessage"},"Time should be greater than 5 Seconds"):r.a.createElement("div",{className:"warningMessage"}),r.a.createElement(c,{name:"setAlarmButton",value:"Set Incident Reminder",className:"setAlarmButton",onClick:function(){if(console.log("inputValue, selectValue",y,b),"Today"===f||"Tomorrow"===f){if(!n||!g){var e={taskFieldRef:n,timeFieldRef:g};return Object.keys(e).map(function(n){if(!e[n]){var t=D[n].current.className.split(" ");t.indexOf("warning-vibration-animation")>=0?(t[t.indexOf("warning-vibration-animation")]="warning-vibration-animation-toggle",o("classArray",t),D[n].current.className="".concat(t.join(" "))):t.indexOf("warning-vibration-animation-toggle")>=0?(t[t.indexOf("warning-vibration-animation-toggle")]="warning-vibration-animation",o("classArray",t),D[n].current.className="".concat(t.join(" "))):D[n].current.className="".concat(t.join(" ")," warning-vibration-animation")}}),void setTimeout(function(){S.current.className="taskInputField",R.current.className="inputTime",console.log("Removed")},1e3)}if("Today"===f){var t=String(new Date);if(t=t.slice(0,t.indexOf((new Date).getFullYear())+5)+g+":00 "+t.slice(t.indexOf("GMT")),console.log("stringNewDate",t),new Date(t).getTime()<(new Date).getTime())return void console.log("Dfdsfdsfdsfdsf")}}else if("Recurring"===f){if(console.log("timeFieldRef.current",R.current),!n)return S.current.className="taskInputField warning-vibration-animation",void setTimeout(function(){S.current.className="taskInputField",console.log("Removed")},1e3);if(!y)return R.current.className="inputSelect warning-vibration-animation",void setTimeout(function(){R.current.className="inputSelect",console.log("Removed")},1e3);if(y<5&&"s"===b)return k(!0),void setTimeout(function(){k(!1)},2e3)}switch(f){case"Today":var a=String(new Date);a=a.slice(0,a.indexOf((new Date).getFullYear())+5)+g+":00 "+a.slice(a.indexOf("GMT")),console.log("newDate",a),chrome.alarms.create(n,{when:new Date(a).getTime()});break;case"Tomorrow":var r=String(new Date(Date.now()+864e5));r=r.slice(0,r.indexOf((new Date).getFullYear())+5)+g+":00 "+r.slice(r.indexOf("GMT")),console.log("nextDayDate",r),chrome.alarms.create(n,{when:new Date(r).getTime()});break;case"Recurring":"m"===b?chrome.alarms.create(n,{periodInMinutes:Number(y)}):chrome.alarms.create(n,{periodInMinutes:y/60})}var i;(i=document.getElementById("snackbar")).className="show",setTimeout(function(){i.className=i.className.replace("show","")},3e3)}}))},f=function(e){var n=e.links,t=e.className,a=e.onClick,i=e.active;return r.a.createElement("div",{className:t},function(e,n,t){return e.map(function(e,a){return r.a.createElement("span",{key:a,onClick:function(a){a.preventDefault(),n("|"===e?t:e)},className:t===e?"activeBottomNav":""},e)})}(n,a,i))};function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(t.push(l.value),!n||t.length!==n);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=function(){var e=d(Object(a.useState)([]),2),n=e[0],t=e[1];Object(a.useEffect)(function(){return console.log("IN COMPONENT DID MOUNT")}),chrome.alarms.getAll(function(e){console.log("lalarms",e),JSON.stringify(e)!=JSON.stringify(n)&&t(e)});return r.a.createElement("div",{className:"tasks-container"},r.a.createElement("ul",null,n.length?n.map(function(e,a){var i=e.scheduledTime,l=String(new Date(i));return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{key:a},e.name," at ",l.slice(l.indexOf((new Date).getFullYear())+5,l.indexOf("GMT")-1),r.a.createElement("img",{src:"../delete.svg",onClick:function(a){var r;a.preventDefault(),r=e.name,n.length&&(t(n.filter(function(e){return e.name!==r})),chrome.alarms.clear(r))},className:"cross-button"})))}):""))};function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(t.push(l.value),!n||t.length!==n);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=function(){var e=g(Object(a.useState)([""]),2),n=e[0],t=e[1];return chrome.storage.sync.get({list:[]},function(e){console.log(e.list),t(e.list)}),r.a.createElement("div",{className:"tasks-container"},r.a.createElement("ul",null,n.reverse().map(function(e){return r.a.createElement("li",null,e)})))};function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(t.push(l.value),!n||t.length!==n);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.default=function(){var e=h(Object(a.useState)("Set Reminder"),2),n=e[0],t=e[1];return console.log("showAlarmsList",n),r.a.createElement("div",{className:"container"},"Set Reminder"===n?r.a.createElement(m,null):"Active Reminders"===n?r.a.createElement(v,null):r.a.createElement(p,null),r.a.createElement(f,{links:["Set Reminder","|","Active Reminders","|","History"],className:"bottomNavigation",onClick:t,active:n}),r.a.createElement("div",{id:"snackbar"},"Reminder set!!"))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9JbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9TZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NyYy9VdGlscy9Mb2dnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSW5wdXRTZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvU2NoZWR1bGVBbGFybUNvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Cb3R0b21OYXZpZ2F0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1Rhc2tzQ29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0hpc3RvcnlDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQXBwLmpzIl0sIm5hbWVzIjpbIklucHV0IiwiUmVhY3QiLCJmb3J3YXJkUmVmIiwiX3JlZiIsInJlZiIsInR5cGUiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwib25DaGFuZ2UiLCJuYW1lIiwiY2xhc3NOYW1lIiwicmVhY3RfZGVmYXVsdCIsImEiLCJjcmVhdGVFbGVtZW50IiwiZSIsInRhcmdldCIsIlNlbGVjdCIsIm9wdGlvbnMiLCJtYXAiLCJvcHRpb24iLCJpbmRleCIsImtleSIsIkJ1dHRvbiIsIm9uQ2xpY2siLCJsb2dnZXIiLCJ0ZXh0IiwidmFsdWVzIiwiY29uc29sZSIsImxvZyIsIklucHV0U2VsZWN0IiwiaW5wdXRQbGFjZUhvbGRlciIsImlucHV0VmFsdWUiLCJpbnB1dE9uY2hhbmdlIiwic2VsZWN0VmFsdWUiLCJzZWxlY3RPbmNoYW5nZSIsImNvbXBvbmVudHNfSW5wdXQiLCJjb21wb25lbnRzX1NlbGVjdCIsIlNjaGVkdWxlQWxhcm1Db250YWluZXIiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkiLCJ1c2VTdGF0ZSIsInRhc2siLCJzZXRUYXNrIiwiX3VzZVN0YXRlNCIsImRheSIsInNldERheSIsIl91c2VTdGF0ZTYiLCJ0aW1lIiwic2V0VGltZSIsIl91c2VTdGF0ZTgiLCJfdXNlU3RhdGUxMCIsIl91c2VTdGF0ZTEyIiwic2hvd1dhcm5pbmciLCJzZXRXYXJuaW5nIiwidGFza0ZpZWxkUmVmIiwiY3JlYXRlUmVmIiwidGltZUZpZWxkUmVmIiwicmVmcyIsImNvbXBvbmVudHNfSW5wdXRTZWxlY3QiLCJjb21wb25lbnRzX0J1dHRvbiIsInN0YXRlIiwiT2JqZWN0Iiwia2V5cyIsImNsYXNzQXJyYXkiLCJjdXJyZW50Iiwic3BsaXQiLCJpbmRleE9mIiwiTG9nZ2VyIiwiY29uY2F0Iiwiam9pbiIsInNldFRpbWVvdXQiLCJzdHJpbmdOZXdEYXRlIiwiU3RyaW5nIiwiRGF0ZSIsInNsaWNlIiwiZ2V0RnVsbFllYXIiLCJnZXRUaW1lIiwiY2hyb21lIiwiYWxhcm1zIiwiY3JlYXRlIiwid2hlbiIsInN0cmluZ05leHREYXlEYXRlIiwibm93IiwicGVyaW9kSW5NaW51dGVzIiwiTnVtYmVyIiwieCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXBsYWNlIiwiQm90dG9tTmF2aWdhdGlvbiIsImxpbmtzIiwiYWN0aXZlIiwibGluayIsInByZXZlbnREZWZhdWx0IiwiYWRkUGlwZUJldHdlZW5MaW5rcyIsIlRhc2tzQ29udGFpbmVyIiwiVGFza3NDb250YWluZXJfc2xpY2VkVG9BcnJheSIsInNldEFsYXJtc0xpc3QiLCJ1c2VFZmZlY3QiLCJnZXRBbGwiLCJhbGFybXNMaXN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsImFsYXJtIiwic2NoZWR1bGVkVGltZUluTWlsbFMiLCJzY2hlZHVsZWRUaW1lIiwiZGF0ZSIsIkZyYWdtZW50Iiwic3JjIiwiZmlsdGVyIiwiY2xlYXIiLCJIaXN0b3J5Q29udGFpbmVyIiwiSGlzdG9yeUNvbnRhaW5lcl9zbGljZWRUb0FycmF5IiwiYWxhcm1zSGlzdG9yeSIsInNldEFsYXJtc0hpc3RvcnkiLCJzdG9yYWdlIiwic3luYyIsImdldCIsImxpc3QiLCJkYXRhIiwicmV2ZXJzZSIsImxpc3RWYWx1ZSIsIkFwcCIsIkFwcF9zbGljZWRUb0FycmF5Iiwic2hvd0FsYXJtc0xpc3QiLCJzZXRBbGFybVZpZXciLCJjb21wb25lbnRzX1NjaGVkdWxlQWxhcm1Db250YWluZXIiLCJjb21wb25lbnRzX1Rhc2tzQ29udGFpbmVyIiwiY29tcG9uZW50c19IaXN0b3J5Q29udGFpbmVyIiwiY29tcG9uZW50c19Cb3R0b21OYXZpZ2F0aW9uIiwiaWQiXSwibWFwcGluZ3MiOiJvSEFjZUEsRUFaREMsSUFBTUMsV0FBVyxTQUFBQyxFQUEwREMsR0FBMUQsSUFBR0MsRUFBSEYsRUFBR0UsS0FBTUMsRUFBVEgsRUFBU0csWUFBYUMsRUFBdEJKLEVBQXNCSSxNQUFPQyxFQUE3QkwsRUFBNkJLLFNBQVVDLEVBQXZDTixFQUF1Q00sS0FBTUMsRUFBN0NQLEVBQTZDTyxVQUE3QyxPQUMzQkMsRUFBQUMsRUFBQUMsY0FBQSxTQUNJUixLQUFNQSxFQUNOQyxZQUFhQSxFQUNiQyxNQUFPQSxFQUNQQyxTQUFVLFNBQUNNLEdBQUQsT0FBT04sRUFBU00sRUFBRUMsT0FBT1IsUUFDbkNFLEtBQU1BLEVBQ05DLFVBQVdBLEVBQ1hOLElBQUtBLE1DQUVZLEVBUkEsU0FBQWIsR0FBQSxJQUFHTSxFQUFITixFQUFHTSxLQUFNRixFQUFUSixFQUFTSSxNQUFPQyxFQUFoQkwsRUFBZ0JLLFNBQVVTLEVBQTFCZCxFQUEwQmMsUUFBU1AsRUFBbkNQLEVBQW1DTyxVQUFuQyxPQUNYQyxFQUFBQyxFQUFBQyxjQUFBLFVBQVFKLEtBQU1BLEVBQU1GLE1BQU9BLEVBQU9DLFNBQVUsU0FBQ00sR0FBRCxPQUFPTixFQUFTTSxFQUFFQyxPQUFPUixRQUFRRyxVQUFXQSxHQUVoRk8sRUFBUUMsSUFBSSxTQUFDQyxFQUFRQyxHQUFULE9BQWtCVCxFQUFBQyxFQUFBQyxjQUFBLFVBQVFOLE1BQU9ZLEVBQVFFLElBQUtELEdBQVFELE9DSy9ERyxFQVJBLFNBQUFuQixHQUFBLElBQUdJLEVBQUhKLEVBQUdJLE1BQU9nQixFQUFWcEIsRUFBVW9CLFFBQVNkLEVBQW5CTixFQUFtQk0sS0FBTUMsRUFBekJQLEVBQXlCTyxVQUF6QixPQUNYQyxFQUFBQyxFQUFBQyxjQUFBLFVBQ0lVLFFBQVNBLEVBQ1RkLEtBQU1BLEVBQ05DLFVBQVdBLEdBQ2JILElDSFNpQixFQUpBLFNBQUNDLEVBQU1DLEdBQ2xCQyxRQUFRQyxJQUFJSCxFQUFNQyxJQ3FCUEcsRUFsQkszQixxQkFBVyxTQUFBQyxFQUE4RUMsR0FBOUUsSUFBRTBCLEVBQUYzQixFQUFFMkIsaUJBQWtCQyxFQUFwQjVCLEVBQW9CNEIsV0FBWUMsRUFBaEM3QixFQUFnQzZCLGNBQWVDLEVBQS9DOUIsRUFBK0M4QixZQUFhQyxFQUE1RC9CLEVBQTREK0IsZUFBNUQsT0FDM0J2QixFQUFBQyxFQUFBQyxjQUFBLE9BQUtILFVBQVUsY0FBY04sSUFBS0EsR0FDOUJPLEVBQUFDLEVBQUFDLGNBQUNzQixFQUFELENBQ0k5QixLQUFLLFNBQ0xDLFlBQWF3QixFQUNickIsS0FBSyxhQUNMRixNQUFPd0IsRUFDUHZCLFNBQVV3QixJQUVkckIsRUFBQUMsRUFBQUMsY0FBQ3VCLEVBQUQsQ0FDSTNCLEtBQUssU0FDTFEsUUFBUyxDQUFDLElBQUssS0FDZlYsTUFBTzBCLEVBQ1B6QixTQUFVMEIseVpDVnRCLElBc05lRyxFQXROZ0IsV0FBTSxJQUFBQyxFQUFBQyxFQUNUQyxtQkFBUyxJQURBLEdBQzFCQyxFQUQwQkgsRUFBQSxHQUNwQkksRUFEb0JKLEVBQUEsR0FBQUssRUFBQUosRUFFWEMsbUJBQVMsU0FGRSxHQUUxQkksRUFGMEJELEVBQUEsR0FFckJFLEVBRnFCRixFQUFBLEdBQUFHLEVBQUFQLEVBR1RDLG1CQUFTLElBSEEsR0FHMUJPLEVBSDBCRCxFQUFBLEdBR3BCRSxFQUhvQkYsRUFBQSxHQUFBRyxFQUFBVixFQUlHQyxtQkFBUyxJQUpaLEdBSTFCVCxFQUowQmtCLEVBQUEsR0FJZGpCLEVBSmNpQixFQUFBLEdBQUFDLEVBQUFYLEVBS0tDLG1CQUFTLEtBTGQsR0FLMUJQLEVBTDBCaUIsRUFBQSxHQUtiaEIsRUFMYWdCLEVBQUEsR0FBQUMsRUFBQVosRUFNQ0Msb0JBQVMsR0FOVixHQU0xQlksRUFOMEJELEVBQUEsR0FNYkUsRUFOYUYsRUFBQSxHQVEzQkcsRUFBZXJELElBQU1zRCxZQUNyQkMsRUFBZXZELElBQU1zRCxZQUVyQkUsRUFBTyxDQUNUSCxlQUNBRSxnQkFpSkosT0FDSTdDLEVBQUFDLEVBQUFDLGNBQUEsT0FBS0gsVUFBVSwwQkFDWEMsRUFBQUMsRUFBQUMsY0FBQ3NCLEVBQUQsQ0FDSTlCLEtBQUssT0FDTEMsWUFBWSxrQkFDWkcsS0FBSyxPQUNMRixNQUFPa0MsRUFDUGpDLFNBQVVrQyxFQUNWdEMsSUFBS2tELEVBQ0w1QyxVQUFVLG1CQUVkQyxFQUFBQyxFQUFBQyxjQUFDdUIsRUFBRCxDQUNJM0IsS0FBSyxNQUNMUSxRQUFTLENBQUMsUUFBUyxXQUFZLGFBQy9CVixNQUFPcUMsRUFDUHBDLFNBQVVxQyxFQUNWbkMsVUFBVSxjQUdGLGNBQVJrQyxFQUVRakMsRUFBQUMsRUFBQUMsY0FBQzZDLEVBQUQsQ0FDSTNCLFdBQVlBLEVBQ1pDLGNBQWVBLEVBQ2ZGLGlCQUFpQixPQUNqQkcsWUFBYUEsRUFDYkMsZUFBZ0JBLEVBQ2hCOUIsSUFBS29ELElBR1Q3QyxFQUFBQyxFQUFBQyxjQUFDc0IsRUFBRCxDQUNJOUIsS0FBSyxPQUNMSSxLQUFLLE9BQ0xGLE1BQU93QyxFQUNQdkMsU0FBVXdDLEVBQ1Z0QyxVQUFVLFlBQ1ZOLElBQUtvRCxJQUlqQkosRUFFUXpDLEVBQUFDLEVBQUFDLGNBQUEsT0FBS0gsVUFBVSxrQkFBZix5Q0FFQUMsRUFBQUMsRUFBQUMsY0FBQSxPQUFLSCxVQUFVLG1CQUUzQkMsRUFBQUMsRUFBQUMsY0FBQzhDLEVBQUQsQ0FDSWxELEtBQUssaUJBQ0xGLE1BQU0sd0JBQ05HLFVBQVUsaUJBQ1ZhLFFBaE1pQixXQUd6QixHQUZBSSxRQUFRQyxJQUFJLDBCQUEyQkcsRUFBWUUsR0FFdkMsVUFBUlcsR0FBMkIsYUFBUkEsRUFBb0IsQ0FDdkMsSUFBS0gsSUFBU00sRUFBTSxDQUNoQixJQUFNYSxFQUFRLENBQ1ZOLGFBQWdCYixFQUNoQmUsYUFBZ0JULEdBMkJwQixPQXhCQWMsT0FBT0MsS0FBS0YsR0FBTzFDLElBQUksU0FBQUcsR0FDbkIsSUFBS3VDLEVBQU12QyxHQUFNLENBQ2IsSUFDTTBDLEVBRGdCTixFQUFLcEMsR0FBSzJDLFFBQVF0RCxVQUNMdUQsTUFBTSxLQUNyQ0YsRUFBV0csUUFBUSxnQ0FBa0MsR0FDckRILEVBQVdBLEVBQVdHLFFBQVEsZ0NBQWtDLHFDQUVoRUMsRUFBTyxhQUFjSixHQUNyQk4sRUFBS3BDLEdBQUsyQyxRQUFRdEQsVUFBbEIsR0FBQTBELE9BQWlDTCxFQUFXTSxLQUFLLE9BQzFDTixFQUFXRyxRQUFRLHVDQUF5QyxHQUNuRUgsRUFBV0EsRUFBV0csUUFBUSx1Q0FBeUMsOEJBRXZFQyxFQUFPLGFBQWNKLEdBQ3JCTixFQUFLcEMsR0FBSzJDLFFBQVF0RCxVQUFsQixHQUFBMEQsT0FBaUNMLEVBQVdNLEtBQUssT0FFakRaLEVBQUtwQyxHQUFLMkMsUUFBUXRELFVBQWxCLEdBQUEwRCxPQUFpQ0wsRUFBV00sS0FBSyxLQUFqRCx3Q0FJWkMsV0FBVyxXQUNQaEIsRUFBYVUsUUFBUXRELFVBQVksaUJBQ2pDOEMsRUFBYVEsUUFBUXRELFVBQVksWUFDakNpQixRQUFRQyxJQUFJLFlBQ2IsS0FFQSxHQUFXLFVBQVJnQixFQUFpQixDQUN2QixJQUFJMkIsRUFBZ0JDLE9BQU8sSUFBSUMsTUFLL0IsR0FGQUYsRUFBZ0JBLEVBQWNHLE1BQU0sRUFBR0gsRUFBY0wsU0FBUSxJQUFJTyxNQUFPRSxlQUFpQixHQUFLNUIsRUFBTyxPQUFjd0IsRUFBY0csTUFBTUgsRUFBY0wsUUFBUSxRQUM3SnZDLFFBQVFDLElBQUksZ0JBQWlCMkMsR0FDMUIsSUFBSUUsS0FBS0YsR0FBZUssV0FBWSxJQUFJSCxNQUFPRyxVQUU5QyxZQURBakQsUUFBUUMsSUFBSSx3QkFJakIsR0FBWSxjQUFSZ0IsRUFBcUIsQ0FFNUIsR0FEQWpCLFFBQVFDLElBQUksdUJBQXdCNEIsRUFBYVEsVUFDNUN2QixFQU1ELE9BTEFhLEVBQWFVLFFBQVF0RCxVQUFZLGtEQUNqQzRELFdBQVcsV0FDUGhCLEVBQWFVLFFBQVF0RCxVQUFZLGlCQUNqQ2lCLFFBQVFDLElBQUksWUFDYixLQUlQLElBQUtHLEVBTUQsT0FMQXlCLEVBQWFRLFFBQVF0RCxVQUFZLCtDQUNqQzRELFdBQVcsV0FDUGQsRUFBYVEsUUFBUXRELFVBQVksY0FDakNpQixRQUFRQyxJQUFJLFlBQ2IsS0FJUCxHQUFJRyxFQUFhLEdBQXFCLE1BQWhCRSxFQU9sQixPQU5Bb0IsR0FBVyxRQUVYaUIsV0FBVyxXQUNQakIsR0FBVyxJQUNaLEtBT1gsT0FBUVQsR0FFSixJQUFLLFFBRUQsSUFBSTJCLEVBQWdCQyxPQUFPLElBQUlDLE1BRy9CRixFQUFnQkEsRUFBY0csTUFBTSxFQUFHSCxFQUFjTCxTQUFRLElBQUlPLE1BQU9FLGVBQWlCLEdBQUs1QixFQUFPLE9BQWN3QixFQUFjRyxNQUFNSCxFQUFjTCxRQUFRLFFBRTdKdkMsUUFBUUMsSUFBSSxVQUFXMkMsR0FFdkJNLE9BQU9DLE9BQU9DLE9BQU90QyxFQUFNLENBQ3ZCdUMsS0FBTSxJQUFJUCxLQUFLRixHQUFlSyxZQUdsQyxNQUVKLElBQUssV0FDRCxJQUFJSyxFQUFvQlQsT0FBTyxJQUFJQyxLQUFLQSxLQUFLUyxNQUFRLFFBR3JERCxFQUFvQkEsRUFBa0JQLE1BQU0sRUFBR08sRUFBa0JmLFNBQVEsSUFBSU8sTUFBT0UsZUFBaUIsR0FBSzVCLEVBQU8sT0FBY2tDLEVBQWtCUCxNQUFNTyxFQUFrQmYsUUFBUSxRQUVqTHZDLFFBQVFDLElBQUksY0FBZXFELEdBQzNCSixPQUFPQyxPQUFPQyxPQUFPdEMsRUFBTSxDQUN2QnVDLEtBQU0sSUFBSVAsS0FBS1EsR0FBbUJMLFlBR3RDLE1BRUosSUFBSyxZQUVtQixNQUFoQjNDLEVBQ0E0QyxPQUFPQyxPQUFPQyxPQUFPdEMsRUFBTSxDQUN2QjBDLGdCQUFpQkMsT0FBT3JELEtBRzVCOEMsT0FBT0MsT0FBT0MsT0FBT3RDLEVBQU0sQ0FDdkIwQyxnQkFBaUJwRCxFQUFXLEtBYzVDLElBQ1FzRCxLQUFJQyxTQUFTQyxlQUFlLGFBQzlCN0UsVUFBWSxPQUNkNEQsV0FBVyxXQUNQZSxFQUFFM0UsVUFBWTJFLEVBQUUzRSxVQUFVOEUsUUFBUSxPQUFRLEtBQzNDLFVDOUhBQyxFQVJVLFNBQUF0RixHQUFBLElBQUd1RixFQUFIdkYsRUFBR3VGLE1BQU9oRixFQUFWUCxFQUFVTyxVQUFXYSxFQUFyQnBCLEVBQXFCb0IsUUFBU29FLEVBQTlCeEYsRUFBOEJ3RixPQUE5QixPQUNyQmhGLEVBQUFDLEVBQUFDLGNBQUEsT0FBS0gsVUFBV0EsR0F2QlEsU0FBQ2dGLEVBQU9uRSxFQUFTb0UsR0FDekMsT0FBT0QsRUFBTXhFLElBQUksU0FBQzBFLEVBQU14RSxHQUVwQixPQUNJVCxFQUFBQyxFQUFBQyxjQUFBLFFBQ0lRLElBQUtELEVBQ0xHLFFBQVMsU0FBQ1QsR0FDTkEsRUFBRStFLGlCQUNGdEUsRUFBaUIsTUFBVHFFLEVBQWVELEVBQVNDLElBRXBDbEYsVUFBV2lGLElBQVdDLEVBQU8sa0JBQW9CLElBRW5EQSxLQWFGRSxDQUFvQkosRUFBT25FLEVBQVNvRSx1WkN6QmhELElBbURlSSxFQW5EUSxXQUFNLElBQUF6RCxFQUFBMEQsRUFHT3hELG1CQUFTLElBSGhCLEdBR2xCc0MsRUFIa0J4QyxFQUFBLEdBR1YyRCxFQUhVM0QsRUFBQSxHQUt6QjRELG9CQUFVLGtCQUFNdkUsUUFBUUMsSUFBSSw0QkFFNUJpRCxPQUFPQyxPQUFPcUIsT0FBTyxTQUFDQyxHQUNsQnpFLFFBQVFDLElBQUksVUFBV3dFLEdBR25CQyxLQUFLQyxVQUFVRixJQUFlQyxLQUFLQyxVQUFVeEIsSUFDN0NtQixFQUFjRyxLQVd0QixPQUNJekYsRUFBQUMsRUFBQUMsY0FBQSxPQUFLSCxVQUFVLG1CQUNYQyxFQUFBQyxFQUFBQyxjQUFBLFVBRVFpRSxFQUFPeUIsT0FFQ3pCLEVBQU81RCxJQUFJLFNBQUNzRixFQUFPcEYsR0FDZixJQUFJcUYsRUFBdUJELEVBQU1FLGNBQzdCQyxFQUFPbkMsT0FBTyxJQUFJQyxLQUFLZ0MsSUFFM0IsT0FDSTlGLEVBQUFDLEVBQUFDLGNBQUFGLEVBQUFDLEVBQUFnRyxTQUFBLEtBQ0lqRyxFQUFBQyxFQUFBQyxjQUFBLE1BQUlRLElBQUtELEdBQ0pvRixFQUFNL0YsS0FEWCxPQUNxQmtHLEVBQUtqQyxNQUFNaUMsRUFBS3pDLFNBQVEsSUFBSU8sTUFBT0UsZUFBaUIsRUFBR2dDLEVBQUt6QyxRQUFRLE9BQVMsR0FDOUZ2RCxFQUFBQyxFQUFBQyxjQUFBLE9BQUtnRyxJQUFJLGdCQUFnQnRGLFFBQVMsU0FBQ1QsR0FyQnZELElBQUNMLEVBcUI2REssRUFBRStFLGlCQXJCL0RwRixFQXFCNkYrRixFQUFNL0YsS0FwQmhIcUUsRUFBT3lCLFNBQ1BOLEVBQWNuQixFQUFPZ0MsT0FBTyxTQUFBTixHQUFLLE9BQUlBLEVBQU0vRixPQUFTQSxLQUNwRG9FLE9BQU9DLE9BQU9pQyxNQUFNdEcsS0FrQm9HQyxVQUFVLHFCQU9sSCx3WkM1QzVCLElBd0Jlc0csRUF4QlUsV0FBTSxJQUFBMUUsRUFBQTJFLEVBRWV6RSxtQkFBUyxDQUFDLEtBRnpCLEdBRXBCMEUsRUFGb0I1RSxFQUFBLEdBRUw2RSxFQUZLN0UsRUFBQSxHQWExQixPQVREdUMsT0FBT3VDLFFBQVFDLEtBQUtDLElBQUksQ0FDdkJDLEtBQUssSUFFUixTQUFTQyxHQUNON0YsUUFBUUMsSUFBSTRGLEVBQUtELE1BQ2pCSixFQUFpQkssRUFBS0QsUUFLckI1RyxFQUFBQyxFQUFBQyxjQUFBLE9BQUtILFVBQVUsbUJBQ2RDLEVBQUFDLEVBQUFDLGNBQUEsVUFDTXFHLEVBQWNPLFVBQVV2RyxJQUFJLFNBQVN3RyxHQUNwQyxPQUFPL0csRUFBQUMsRUFBQUMsY0FBQSxVQUFLNkcsMFpDd0JYQyxVQXJDSCxXQUFNLElBQUFyRixFQUFBc0YsRUFDeUJwRixtQkFBUyxnQkFEbEMsR0FDUHFGLEVBRE92RixFQUFBLEdBQ1N3RixFQURUeEYsRUFBQSxHQUlkLE9BRkFYLFFBQVFDLElBQUksaUJBQWtCaUcsR0FHMUJsSCxFQUFBQyxFQUFBQyxjQUFBLE9BQUtILFVBQVUsYUFJNEIsaUJBQW5CbUgsRUFFQWxILEVBQUFDLEVBQUFDLGNBQUNrSCxFQUFELE1BRTBCLHFCQUFuQkYsRUFFUGxILEVBQUFDLEVBQUFDLGNBQUNtSCxFQUFELE1BSUFySCxFQUFBQyxFQUFBQyxjQUFDb0gsRUFBRCxNQU9wQnRILEVBQUFDLEVBQUFDLGNBQUNxSCxFQUFELENBQ0l4QyxNQUFPLENBQUMsZUFBZ0IsSUFBSyxtQkFBbUIsSUFBSyxXQUNyRGhGLFVBQVUsbUJBQ1ZhLFFBQVN1RyxFQUNUbkMsT0FBUWtDLElBRVpsSCxFQUFBQyxFQUFBQyxjQUFBLE9BQUtzSCxHQUFHLFlBQVIiLCJmaWxlIjoiMS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBJbnB1dCA9IFJlYWN0LmZvcndhcmRSZWYoKHsgdHlwZSwgcGxhY2Vob2xkZXIsIHZhbHVlLCBvbkNoYW5nZSwgbmFtZSwgY2xhc3NOYW1lIH0sIHJlZikgPT4gKFxuICAgIDxpbnB1dCBcbiAgICAgICAgdHlwZT17dHlwZX1cbiAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICBuYW1lPXtuYW1lfVxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgLz5cbikpO1xuXG5leHBvcnQgZGVmYXVsdCBJbnB1dDsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBTZWxlY3QgPSAoeyBuYW1lLCB2YWx1ZSwgb25DaGFuZ2UsIG9wdGlvbnMsIGNsYXNzTmFtZX0pID0+IChcbiAgICA8c2VsZWN0IG5hbWU9e25hbWV9IHZhbHVlPXt2YWx1ZX0gb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSl9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAge1xuICAgICAgICAgICAgb3B0aW9ucy5tYXAoKG9wdGlvbiwgaW5kZXgpPT4gPG9wdGlvbiB2YWx1ZT17b3B0aW9ufSBrZXk9e2luZGV4fT57b3B0aW9ufTwvb3B0aW9uPilcbiAgICAgICAgfVxuICAgIDwvc2VsZWN0PlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0OyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IEJ1dHRvbiA9ICh7IHZhbHVlLCBvbkNsaWNrLCBuYW1lLCBjbGFzc05hbWUgfSkgPT4gKFxuICAgIDxidXR0b24gXG4gICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgID57dmFsdWV9PC9idXR0b24+XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBCdXR0b247IiwiY29uc3QgbG9nZ2VyID0gKHRleHQsIHZhbHVlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKHRleHQsIHZhbHVlcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjsiLCJpbXBvcnQgUmVhY3QsIHtmb3J3YXJkUmVmfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSW5wdXQgZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgU2VsZWN0IGZyb20gJy4vU2VsZWN0JztcblxuY29uc3QgSW5wdXRTZWxlY3QgPSBmb3J3YXJkUmVmKCh7aW5wdXRQbGFjZUhvbGRlciwgaW5wdXRWYWx1ZSwgaW5wdXRPbmNoYW5nZSwgc2VsZWN0VmFsdWUsIHNlbGVjdE9uY2hhbmdlIH0sIHJlZikgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXRTZWxlY3RcIiByZWY9e3JlZn0+XG4gICAgICAgIDxJbnB1dCBcbiAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2lucHV0UGxhY2VIb2xkZXJ9XG4gICAgICAgICAgICBuYW1lPVwibWluc2VjVGltZVwiXG4gICAgICAgICAgICB2YWx1ZT17aW5wdXRWYWx1ZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtpbnB1dE9uY2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgbmFtZT1cIm1pbnNlY1wiXG4gICAgICAgICAgICBvcHRpb25zPXtbXCJzXCIsIFwibVwiXX1cbiAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RWYWx1ZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtzZWxlY3RPbmNoYW5nZX1cbiAgICAgICAgLz5cbiAgICA8L2Rpdj5cbikpO1xuXG5leHBvcnQgZGVmYXVsdCBJbnB1dFNlbGVjdDsiLCJpbXBvcnQgUmVhY3QsIHt1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgSW5wdXQgZnJvbSAnLi9JbnB1dCc7XHJcbmltcG9ydCBTZWxlY3QgZnJvbSAnLi9TZWxlY3QnO1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4vQnV0dG9uJztcclxuaW1wb3J0IExvZ2dlciBmcm9tICcuLi9VdGlscy9Mb2dnZXInO1xyXG5pbXBvcnQgSW5wdXRTZWxlY3QgZnJvbSAnLi9JbnB1dFNlbGVjdCc7XHJcblxyXG5jb25zdCBTY2hlZHVsZUFsYXJtQ29udGFpbmVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgW3Rhc2ssIHNldFRhc2tdID0gdXNlU3RhdGUoJycpO1xyXG4gICAgY29uc3QgW2RheSwgc2V0RGF5XSA9IHVzZVN0YXRlKCdUb2RheScpO1xyXG4gICAgY29uc3QgW3RpbWUsIHNldFRpbWVdID0gdXNlU3RhdGUoJycpO1xyXG4gICAgY29uc3QgW2lucHV0VmFsdWUsIGlucHV0T25jaGFuZ2VdID0gdXNlU3RhdGUoJycpO1xyXG4gICAgY29uc3QgW3NlbGVjdFZhbHVlLCBzZWxlY3RPbmNoYW5nZV0gPSB1c2VTdGF0ZSgncycpO1xyXG4gICAgY29uc3QgW3Nob3dXYXJuaW5nLCBzZXRXYXJuaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgICBjb25zdCB0YXNrRmllbGRSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcclxuICAgIGNvbnN0IHRpbWVGaWVsZFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xyXG5cclxuICAgIGNvbnN0IHJlZnMgPSB7XHJcbiAgICAgICAgdGFza0ZpZWxkUmVmLFxyXG4gICAgICAgIHRpbWVGaWVsZFJlZlxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVTZXRBbGFybWJ1dHRvbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaW5wdXRWYWx1ZSwgc2VsZWN0VmFsdWUnLCBpbnB1dFZhbHVlLCBzZWxlY3RWYWx1ZSk7XHJcbiAgICAgICAgLy8gY2hyb21lLmFsYXJtcy5jbGVhckFsbCgpO1xyXG4gICAgICAgIGlmIChkYXkgPT09ICdUb2RheScgfHwgZGF5ID09PSAnVG9tb3Jyb3cnKSB7XHJcbiAgICAgICAgICAgIGlmICghdGFzayB8fCAhdGltZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3Rhc2tGaWVsZFJlZic6IHRhc2ssXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVGaWVsZFJlZic6IHRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0YXRlKS5tYXAoa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlW2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nQ2xhc3NlcyA9IHJlZnNba2V5XS5jdXJyZW50LmNsYXNzTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xhc3NBcnJheSA9IGV4aXN0aW5nQ2xhc3Nlcy5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc3NBcnJheS5pbmRleE9mKCd3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb24nKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0FycmF5W2NsYXNzQXJyYXkuaW5kZXhPZignd2FybmluZy12aWJyYXRpb24tYW5pbWF0aW9uJyldID0gJ3dhcm5pbmctdmlicmF0aW9uLWFuaW1hdGlvbi10b2dnbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xhc3NBcnJheS5zcGxpY2UoY2xhc3NBcnJheS5pbmRleE9mKCd3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb24nKSwgMCwgJ3dhcm5pbmctdmlicmF0aW9uLWFuaW1hdGlvbi10b2dnbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2dlcignY2xhc3NBcnJheScsIGNsYXNzQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1trZXldLmN1cnJlbnQuY2xhc3NOYW1lID0gYCR7Y2xhc3NBcnJheS5qb2luKCcgJyl9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbGFzc0FycmF5LmluZGV4T2YoJ3dhcm5pbmctdmlicmF0aW9uLWFuaW1hdGlvbi10b2dnbGUnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0FycmF5W2NsYXNzQXJyYXkuaW5kZXhPZignd2FybmluZy12aWJyYXRpb24tYW5pbWF0aW9uLXRvZ2dsZScpXSA9ICd3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xhc3NBcnJheS5zcGxpY2UoY2xhc3NBcnJheS5pbmRleE9mKCd3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb24tdG9nZ2xlJyksIDAsICd3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2dlcignY2xhc3NBcnJheScsIGNsYXNzQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1trZXldLmN1cnJlbnQuY2xhc3NOYW1lID0gYCR7Y2xhc3NBcnJheS5qb2luKCcgJyl9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnNba2V5XS5jdXJyZW50LmNsYXNzTmFtZSA9IGAke2NsYXNzQXJyYXkuam9pbignICcpfSB3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb25gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2tGaWVsZFJlZi5jdXJyZW50LmNsYXNzTmFtZSA9ICd0YXNrSW5wdXRGaWVsZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZUZpZWxkUmVmLmN1cnJlbnQuY2xhc3NOYW1lID0gJ2lucHV0VGltZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZW1vdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihkYXkgPT09ICdUb2RheScpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHJpbmdOZXdEYXRlID0gU3RyaW5nKG5ldyBEYXRlKCkpOyAvLyBpdCB3aWxsIHJldHVybiBkYXRlIGFzIGUuZyBUdWUgRmViIDI3IDIwMTkgMTE6MTA6NDUgR01UKzA1MzAgKEluZGlhIFN0YW5kYXJkIFRpbWUpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdG8gYmUgbWFkZSBhIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICBzdHJpbmdOZXdEYXRlID0gc3RyaW5nTmV3RGF0ZS5zbGljZSgwLCBzdHJpbmdOZXdEYXRlLmluZGV4T2YobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKSArIDUpICsgdGltZSArICc6MDAnICsgJyAnICsgc3RyaW5nTmV3RGF0ZS5zbGljZShzdHJpbmdOZXdEYXRlLmluZGV4T2YoJ0dNVCcpKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdHJpbmdOZXdEYXRlJywgc3RyaW5nTmV3RGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShzdHJpbmdOZXdEYXRlKS5nZXRUaW1lKCkgPCBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGZkc2Zkc2Zkc2Zkc2ZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXkgPT09ICdSZWN1cnJpbmcnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGltZUZpZWxkUmVmLmN1cnJlbnRcIiwgdGltZUZpZWxkUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICBpZiAoIXRhc2spIHtcclxuICAgICAgICAgICAgICAgIHRhc2tGaWVsZFJlZi5jdXJyZW50LmNsYXNzTmFtZSA9ICd0YXNrSW5wdXRGaWVsZCB3YXJuaW5nLXZpYnJhdGlvbi1hbmltYXRpb24nO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFza0ZpZWxkUmVmLmN1cnJlbnQuY2xhc3NOYW1lID0gJ3Rhc2tJbnB1dEZpZWxkJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFpbnB1dFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lRmllbGRSZWYuY3VycmVudC5jbGFzc05hbWUgPSAnaW5wdXRTZWxlY3Qgd2FybmluZy12aWJyYXRpb24tYW5pbWF0aW9uJztcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVGaWVsZFJlZi5jdXJyZW50LmNsYXNzTmFtZSA9ICdpbnB1dFNlbGVjdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZW1vdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlIDwgNSAmJiBzZWxlY3RWYWx1ZSA9PT0gJ3MnKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRXYXJuaW5nKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFdhcm5pbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoIChkYXkpIHtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ1RvZGF5JzpcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nTmV3RGF0ZSA9IFN0cmluZyhuZXcgRGF0ZSgpKTsgLy8gaXQgd2lsbCByZXR1cm4gZGF0ZSBhcyBlLmcgVHVlIEZlYiAyNyAyMDE5IDExOjEwOjQ1IEdNVCswNTMwIChJbmRpYSBTdGFuZGFyZCBUaW1lKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRvIGJlIG1hZGUgYSBmdW5jdGlvblxyXG4gICAgICAgICAgICAgICAgc3RyaW5nTmV3RGF0ZSA9IHN0cmluZ05ld0RhdGUuc2xpY2UoMCwgc3RyaW5nTmV3RGF0ZS5pbmRleE9mKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSkgKyA1KSArIHRpbWUgKyAnOjAwJyArICcgJyArIHN0cmluZ05ld0RhdGUuc2xpY2Uoc3RyaW5nTmV3RGF0ZS5pbmRleE9mKCdHTVQnKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25ld0RhdGUnLCBzdHJpbmdOZXdEYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjaHJvbWUuYWxhcm1zLmNyZWF0ZSh0YXNrLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlbjogbmV3IERhdGUoc3RyaW5nTmV3RGF0ZSkuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnVG9tb3Jyb3cnOlxyXG4gICAgICAgICAgICAgICAgbGV0IHN0cmluZ05leHREYXlEYXRlID0gU3RyaW5nKG5ldyBEYXRlKERhdGUubm93KCkgKyA4NjQwMDAwMCkpOyAvLyBpdCB3aWxsIHJldHVybiBkYXRlIGFzIGUuZyBUdWUgRmViIDI3IDIwMTkgMTE6MTA6NDUgR01UKzA1MzAgKEluZGlhIFN0YW5kYXJkIFRpbWUpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdG8gYmUgbWFkZSBhIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICBzdHJpbmdOZXh0RGF5RGF0ZSA9IHN0cmluZ05leHREYXlEYXRlLnNsaWNlKDAsIHN0cmluZ05leHREYXlEYXRlLmluZGV4T2YobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKSArIDUpICsgdGltZSArICc6MDAnICsgJyAnICsgc3RyaW5nTmV4dERheURhdGUuc2xpY2Uoc3RyaW5nTmV4dERheURhdGUuaW5kZXhPZignR01UJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCduZXh0RGF5RGF0ZScsIHN0cmluZ05leHREYXlEYXRlKTtcclxuICAgICAgICAgICAgICAgIGNocm9tZS5hbGFybXMuY3JlYXRlKHRhc2ssIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVuOiBuZXcgRGF0ZShzdHJpbmdOZXh0RGF5RGF0ZSkuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnUmVjdXJyaW5nJzpcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzZWxlY3RWYWx1ZScsIHNlbGVjdFZhbHVlLCBpbnB1dFZhbHVlLCB0eXBlb2YgaW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0VmFsdWUgPT09ICdtJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNocm9tZS5hbGFybXMuY3JlYXRlKHRhc2ssIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyaW9kSW5NaW51dGVzOiBOdW1iZXIoaW5wdXRWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaHJvbWUuYWxhcm1zLmNyZWF0ZSh0YXNrLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmlvZEluTWludXRlczogaW5wdXRWYWx1ZS82MFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0V2ZXJ5ZGF5JzpcclxuICAgICAgICAgICAgICAgICAgICBjaHJvbWUuYWxhcm1zLmNyZWF0ZSh7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGJyZWFrOyAqL1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd1NuYWNrQmFyKCkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic25hY2tiYXJcIik7XHJcbiAgICAgICAgICAgIHguY2xhc3NOYW1lID0gXCJzaG93XCI7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeC5jbGFzc05hbWUgPSB4LmNsYXNzTmFtZS5yZXBsYWNlKFwic2hvd1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaG93U25hY2tCYXIoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjaGVkdWxlQWxhcm1Db250YWluZXJcIj5cclxuICAgICAgICAgICAgPElucHV0IFxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJJbmNpZGVudCBOdW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgbmFtZT1cInRhc2tcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e3Rhc2t9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17c2V0VGFza31cclxuICAgICAgICAgICAgICAgIHJlZj17dGFza0ZpZWxkUmVmfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFza0lucHV0RmllbGRcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8U2VsZWN0IFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImRheVwiXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXtbXCJUb2RheVwiLCBcIlRvbW9ycm93XCIsIFwiUmVjdXJyaW5nXCJdfVxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2RheX1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtzZXREYXl9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkYXlTZWxlY3RcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXkgPT09ICdSZWN1cnJpbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRTZWxlY3QgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlPXtpbnB1dFZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRPbmNoYW5nZT17aW5wdXRPbmNoYW5nZX0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFBsYWNlSG9sZGVyPVwiVGltZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RWYWx1ZT17c2VsZWN0VmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RPbmNoYW5nZT17c2VsZWN0T25jaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3RpbWVGaWVsZFJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0aW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0aW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3NldFRpbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbnB1dFRpbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aW1lRmllbGRSZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2hvd1dhcm5pbmcgXHJcbiAgICAgICAgICAgICAgICAgICAgPyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2FybmluZ01lc3NhZ2VcIj5UaW1lIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gNSBTZWNvbmRzPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3YXJuaW5nTWVzc2FnZVwiPjwvZGl2PlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDxCdXR0b24gXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwic2V0QWxhcm1CdXR0b25cIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJTZXQgSW5jaWRlbnQgUmVtaW5kZXJcIlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2V0QWxhcm1CdXR0b25cIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2V0QWxhcm1idXR0b259XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNjaGVkdWxlQWxhcm1Db250YWluZXI7IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuY29uc3QgYWRkUGlwZUJldHdlZW5MaW5rcyA9IChsaW5rcywgb25DbGljaywgYWN0aXZlKSA9PiB7XG4gICAgcmV0dXJuIGxpbmtzLm1hcCgobGluaywgaW5kZXgpPT4ge1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8c3BhbiBcbiAgICAgICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2sobGluayA9PT0gJ3wnID8gYWN0aXZlIDogbGluayk7XG4gICAgICAgICAgICAgICAgfX0gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXthY3RpdmUgPT09IGxpbmsgPyAnYWN0aXZlQm90dG9tTmF2JyA6ICcnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgeyBsaW5rIH1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKVxuXG4gICAgICAgIC8vIGlmIChpbmRleCA9PT0gbGlua3MubGVuZ3RoIC0gMSkgcmV0dXJuIDxzcGFuIGtleT17aW5kZXh9IGNsYXNzTmFtZT17YWN0aXZlID09PSBsaW5rID8gJ2FjdGl2ZUJvdHRvbU5hdicgOiAnJ30gb25DbGljaz17KGUpID0+IHtlLnByZXZlbnREZWZhdWx0KCk7IG9uQ2xpY2sobGluayl9fT57bGlua308L3NwYW4+XG5cbiAgICAgICAgLy8gcmV0dXJuIDxzcGFuIGtleT17aW5kZXh9IG9uQ2xpY2s9eyhlKSA9PiB7ZS5wcmV2ZW50RGVmYXVsdCgpOyBvbkNsaWNrKGxpbmspfX0gY2xhc3NOYW1lPXthY3RpdmUgPT09IGxpbmsgPyAnYWN0aXZlQm90dG9tTmF2JyA6ICcnfT57bGlua318PC9zcGFuPlxuICAgIH0pXG59XG5cbmNvbnN0IEJvdHRvbU5hdmlnYXRpb24gPSAoeyBsaW5rcywgY2xhc3NOYW1lLCBvbkNsaWNrLCBhY3RpdmUgfSkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgICB7XG4gICAgICAgICAgICBhZGRQaXBlQmV0d2VlbkxpbmtzKGxpbmtzLCBvbkNsaWNrLCBhY3RpdmUpXG4gICAgICAgIH1cbiAgICA8L2Rpdj5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IEJvdHRvbU5hdmlnYXRpb247IiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IFRhc2tzQ29udGFpbmVyID0gKCkgPT4ge1xuICAgIC8vIGxldCBhbGFybXMgPSBbXTtcblxuICAgIGNvbnN0IFthbGFybXMsIHNldEFsYXJtc0xpc3RdID0gdXNlU3RhdGUoW10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IGNvbnNvbGUubG9nKFwiSU4gQ09NUE9ORU5UIERJRCBNT1VOVFwiKSk7XG5cbiAgICBjaHJvbWUuYWxhcm1zLmdldEFsbCgoYWxhcm1zTGlzdCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnbGFsYXJtcycsIGFsYXJtc0xpc3QpO1xuICAgICAgICAvLyBhbGFybXMgPSBhbGFybXNMaXN0O1xuXG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShhbGFybXNMaXN0KSAhPSBKU09OLnN0cmluZ2lmeShhbGFybXMpKSB7XG4gICAgICAgICAgICBzZXRBbGFybXNMaXN0KGFsYXJtc0xpc3QpO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHJlbW92ZUFsYXJtID0gKG5hbWUpID0+IHtcbiAgICAgICAgaWYgKGFsYXJtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNldEFsYXJtc0xpc3QoYWxhcm1zLmZpbHRlcihhbGFybSA9PiBhbGFybS5uYW1lICE9PSBuYW1lKSk7XG4gICAgICAgICAgICBjaHJvbWUuYWxhcm1zLmNsZWFyKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrcy1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWxhcm1zLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsYXJtcy5tYXAoKGFsYXJtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NoZWR1bGVkVGltZUluTWlsbFMgPSBhbGFybS5zY2hlZHVsZWRUaW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IFN0cmluZyhuZXcgRGF0ZShzY2hlZHVsZWRUaW1lSW5NaWxsUykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FsYXJtLm5hbWV9IGF0IHtkYXRlLnNsaWNlKGRhdGUuaW5kZXhPZihuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpICsgNSwgZGF0ZS5pbmRleE9mKCdHTVQnKSAtIDEpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4uL2RlbGV0ZS5zdmdcIiBvbkNsaWNrPXsoZSkgPT4ge2UucHJldmVudERlZmF1bHQoKTsgcmVtb3ZlQWxhcm0oYWxhcm0ubmFtZSl9fSBjbGFzc05hbWU9XCJjcm9zcy1idXR0b25cIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8c3BhbiBvbkNsaWNrPXsoZSkgPT4ge2UucHJldmVudERlZmF1bHQoKTsgcmVtb3ZlQWxhcm0oYWxhcm0ubmFtZSl9fSBjbGFzc05hbWU9XCJjcm9zcy1idXR0b25cIj5YPC9zcGFuPiAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tzQ29udGFpbmVyOyIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5cclxuY29uc3QgSGlzdG9yeUNvbnRhaW5lciA9ICgpID0+IHtcclxuICAgIC8vIGxldCBhbGFybXMgPSBbXTtcclxuICAgIGNvbnN0IFthbGFybXNIaXN0b3J5LCBzZXRBbGFybXNIaXN0b3J5XSA9IHVzZVN0YXRlKFsnJ10pO1xyXG4gICBcclxuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KHtcclxuICAgIFx0bGlzdDpbXSAvL3B1dCBkZWZhdWx0dmFsdWVzIGlmIGFueVxyXG5cdH0sXHJcblx0XHRmdW5jdGlvbihkYXRhKSB7XHJcblx0XHQgICBjb25zb2xlLmxvZyhkYXRhLmxpc3QpO1xyXG5cdFx0ICAgc2V0QWxhcm1zSGlzdG9yeShkYXRhLmxpc3QpO1xyXG5cdFx0fVxyXG4gICAgKVxyXG4gICBcclxuXHQgICAgcmV0dXJuIChcclxuXHRcdCAgICA8ZGl2IGNsYXNzTmFtZT1cInRhc2tzLWNvbnRhaW5lclwiPlxyXG5cdFx0XHQgICAgPHVsPlxyXG5cdFx0ICAgICAgICAgIHthbGFybXNIaXN0b3J5LnJldmVyc2UoKS5tYXAoZnVuY3Rpb24obGlzdFZhbHVlKXtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiA8bGk+e2xpc3RWYWx1ZX08L2xpPjtcclxuXHRcdCAgICAgICAgICB9KX1cclxuXHRcdCAgICAgICAgPC91bD5cclxuXHQgICAgICAgIDwvZGl2PlxyXG5cdCAgKTtcclxuICAgIFxyXG5cdH07XHJcbmV4cG9ydCBkZWZhdWx0IEhpc3RvcnlDb250YWluZXI7ICAgXHQiLCJpbXBvcnQgUmVhY3QsIHt1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgU2NoZWR1bGVBbGFybUNvbnRhaW5lciBmcm9tICcuL1NjaGVkdWxlQWxhcm1Db250YWluZXInO1xyXG5pbXBvcnQgQm90dG9tTmF2aWdhdGlvbiBmcm9tICcuL0JvdHRvbU5hdmlnYXRpb24nO1xyXG5pbXBvcnQgVGFza3NDb250YWluZXIgZnJvbSAnLi9UYXNrc0NvbnRhaW5lcic7XHJcbmltcG9ydCBIaXN0b3J5Q29udGFpbmVyIGZyb20gJy4vSGlzdG9yeUNvbnRhaW5lcic7XHJcblxyXG5jb25zdCBBcHAgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBbc2hvd0FsYXJtc0xpc3QsIHNldEFsYXJtVmlld10gPSB1c2VTdGF0ZSgnU2V0IFJlbWluZGVyJyk7XHJcbiAgICBjb25zb2xlLmxvZygnc2hvd0FsYXJtc0xpc3QnLCBzaG93QWxhcm1zTGlzdCk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3dBbGFybXNMaXN0ID09PSAnU2V0IFJlbWluZGVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTY2hlZHVsZUFsYXJtQ29udGFpbmVyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvd0FsYXJtc0xpc3QgPT09ICdBY3RpdmUgUmVtaW5kZXJzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYXNrc0NvbnRhaW5lciAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIaXN0b3J5Q29udGFpbmVyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KSgpXHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8Qm90dG9tTmF2aWdhdGlvbiBcclxuICAgICAgICAgICAgICAgIGxpbmtzPXtbJ1NldCBSZW1pbmRlcicsICd8JywgJ0FjdGl2ZSBSZW1pbmRlcnMnLCd8JywgJ0hpc3RvcnknXX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJvdHRvbU5hdmlnYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17c2V0QWxhcm1WaWV3fVxyXG4gICAgICAgICAgICAgICAgYWN0aXZlPXtzaG93QWxhcm1zTGlzdH1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPGRpdiBpZD1cInNuYWNrYmFyXCI+UmVtaW5kZXIgc2V0ISE8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHA7Il0sInNvdXJjZVJvb3QiOiIifQ==